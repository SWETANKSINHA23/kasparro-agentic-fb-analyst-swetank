# Evaluator Logic Specification

## Objective
Validate the hypotheses generated by the Insight Agent using numerical evidence from the dataset. This component ensures that every diagnostic claim is supported by hard data before being presented to the user.

## Validation Logic

### Input Data
- **Hypothesis**: The diagnostic claim (e.g., "ROAS dropped due to creative fatigue").
- **Metrics**: Aggregated performance data for current vs. previous periods.

### Scoring Rules
The evaluator assigns a confidence score (0.0 - 1.0) based on the strength of the evidence:

| Score Range | Evidence Strength | Criteria |
|:---|:---|:---|
| **0.8 - 1.0** | Strong | Primary metric change > threshold AND secondary metric aligns. |
| **0.5 - 0.79** | Moderate | Primary metric change > threshold but isolated. |
| **< 0.5** | Weak | Metric change negligible or contradictory. |

### Verification Steps
1. **Calculate % Change**: Compute the delta for key metrics (ROAS, CTR, CPM).
2. **Check Alignment**: Ensure the metric movement supports the claim (e.g., if "ROAS dropped", Revenue should not be up).
3. **Reject Unsubstantiated Claims**: If the data doesn't match the story, mark as `validated: false`.

## Interface Schema

### Output Object (JSON)
```json
{
  "hypothesis": "ROAS dropped due to a 34% fall in CTR.",
  "confidence": 0.86,
  "validated": true,
  "evidence": "Confirmed ROAS drop of 34.2%. Revenue also declined."
}
```
